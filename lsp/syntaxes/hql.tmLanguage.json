{
  "scopeName": "source.hql",
  "name": "HQL",
  "fileTypes": ["hql"],
  "patterns": [
    { "include": "#comment" },
    { "include": "#special-form" },
    { "include": "#import-statement" },
    { "include": "#enum-statement" },
    { "include": "#case-statement" },
    { "include": "#from-keyword" },
    { "include": "#fn-statement" },
    { "include": "#string" },
    { "include": "#number" },
    { "include": "#boolean" },
    { "include": "#nil" },
    { "include": "#keyword" },
    { "include": "#function-definition" },
    { "include": "#type-definition" },
    { "include": "#function-call" },
    { "include": "#type-annotation" },
    { "include": "#type-expression" },
    { "include": "#named-parameter" },
    { "include": "#default-parameter" },
    { "include": "#vector-literal" },
    { "include": "#object-literal" },
    { "include": "#set-literal" },
    { "include": "#enum-declaration" },
    { "include": "#class-declaration" },
    { "include": "#import-declaration" },
    { "include": "#export-declaration" },
    { "include": "#dot-notation" },
    { "include": "#types" },
    { "include": "#regular-symbol" },
    { "include": "#parens" }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "match": ";.*$",
          "name": "comment.line.semicolon.hql"
        },
        {
          "begin": "/\\*",
          "end": "\\*/",
          "name": "comment.block.hql"
        },
        {
          "match": "//.*$",
          "name": "comment.line.double-slash.hql"
        }
      ]
    },
    "import-statement": {
      "match": "\\(\\s*(import)\\b",
      "captures": {
        "1": { "name": "keyword.control.hql" }
      }
    },
    "enum-statement": {
      "match": "\\(\\s*(enum)\\b",
      "captures": {
        "1": { "name": "keyword.control.hql" }
      }
    },
    "case-statement": {
      "match": "\\(\\s*(case)\\b",
      "captures": {
        "1": { "name": "keyword.control.hql" }
      }
    },
    "from-keyword": {
      "match": "\\b(from)\\b",
      "name": "keyword.control.hql"
    },
    "fn-statement": {
      "match": "\\(\\s*(fn)\\b",
      "captures": {
        "1": { "name": "keyword.control.hql" }
      }
    },
    "special-form": {
      "patterns": [
        {
          "match": "\\b(import|export|from|as|module|namespace|enum|case|def|var|let|fx|fn|defmacro|macro|if|loop|recur|cond|when|unless|for|while|class|method|constructor|do|repeat|set!|return|->|&|\\.|from:|to:|by:|if-let|when-let|and|or|not|str|inc|dec|contains\\?|eq\\?|as|try|catch|finally|throw|new|interface|protocol|static|private|public|protected|override|extend|implements|super|this|typeof|instanceof|in|of|async|await|yield|delete|get|set|with|is|abstract|virtual|final|require|provide|namespace|use|true|false|nil|null|undefined)\\b",
          "name": "keyword.control.hql"
        },
        {
          "match": "\\(\\s*(import|export|from|as|module|namespace|enum|case|def|var|let|fx|fn|defmacro|macro|if|loop|recur|cond|when|unless|for|while|class|method|constructor|do|repeat|set!|return|->|&|\\.|from:|to:|by:|if-let|when-let|and|or|not|str|inc|dec|contains\\?|eq\\?|as|try|catch|finally|throw|new|interface|protocol|static|private|public|protected|override|extend|implements|super|this|typeof|instanceof|in|of|async|await|yield|delete|get|set|with|is|abstract|virtual|final|require|provide|namespace|use)\\b",
          "captures": {
            "1": { "name": "keyword.control.hql" }
          }
        }
      ]
    },
    "string": {
      "name": "string.quoted.double.hql",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.hql",
          "match": "\\\\."
        },
        {
          "name": "meta.embedded.line.hql",
          "begin": "\\\\\\(",
          "beginCaptures": {
            "0": {
              "name": "punctuation.section.embedded.begin.hql"
            }
          },
          "end": "\\)",
          "endCaptures": {
            "0": {
              "name": "punctuation.section.embedded.end.hql"
            }
          },
          "patterns": [
            { "include": "$self" }
          ]
        }
      ]
    },
    "number": {
      "match": "(-|\\+)?\\d+(\\.\\d+)?",
      "name": "constant.numeric.hql"
    },
    "boolean": {
      "match": "\\b(true|false)\\b",
      "name": "constant.language.boolean.hql"
    },
    "nil": {
      "match": "\\b(nil|null|undefined|NaN|Infinity)\\b",
      "name": "constant.language.nil.hql"
    },
    "keyword": {
      "match": "(:|[a-zA-Z][a-zA-Z0-9\\-_]*:)",
      "name": "constant.other.keyword.hql"
    },
    "function-definition": {
      "patterns": [
        {
          "begin": "\\((fn|fx)\\s+([a-zA-Z\\-_][a-zA-Z0-9\\-_\\?!]*)",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" },
            "2": { "name": "entity.name.function.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        },
        {
          "begin": "\\((defmacro|macro)\\s+([a-zA-Z\\-_][a-zA-Z0-9\\-_\\?!]*)",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" },
            "2": { "name": "entity.name.function.macro.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        }
      ]
    },
    "type-definition": {
      "begin": "\\b(Any|Int|Double|String|Bool|Array)\\b",
      "beginCaptures": {
        "1": { "name": "support.type.hql" }
      },
      "end": "(?=[\\s\\(\\)\\{\\}\\[\\]\\,\\;])",
      "patterns": [
        { "include": "$self" }
      ]
    },
    "function-call": {
      "begin": "\\(([a-zA-Z\\-_][a-zA-Z0-9\\-_\\?!]*)",
      "beginCaptures": {
        "1": { "name": "entity.name.function.hql" }
      },
      "end": "\\)",
      "patterns": [
        { "include": "$self" }
      ]
    },
    "type-annotation": {
      "match": "\\b([a-zA-Z][a-zA-Z0-9\\-_]*)\\s*:\\s*([A-Z][a-zA-Z0-9<>\\[\\]\\|&\\?]*)",
      "captures": {
        "1": { "name": "variable.parameter.hql" },
        "2": { "name": "support.type.hql" }
      }
    },
    "type-expression": {
      "match": "\\(->\\s*([A-Z][a-zA-Z0-9]*(?:\\[\\])?)",
      "captures": {
        "1": { "name": "support.type.hql" }
      }
    },
    "named-parameter": {
      "match": "\\b([a-zA-Z][a-zA-Z0-9\\-_]*):\\s*",
      "captures": {
        "1": { "name": "variable.parameter.hql" }
      }
    },
    "default-parameter": {
      "match": "\\b([a-zA-Z][a-zA-Z0-9\\-_]*)\\s+(=)\\s+",
      "captures": {
        "1": { "name": "variable.parameter.hql" },
        "2": { "name": "keyword.operator.assignment.hql" }
      }
    },
    "vector-literal": {
      "begin": "\\[",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.array.begin.hql" }
      },
      "end": "\\]",
      "endCaptures": {
        "0": { "name": "punctuation.definition.array.end.hql" }
      },
      "name": "meta.vector.hql",
      "patterns": [
        { "include": "$self" }
      ]
    },
    "object-literal": {
      "begin": "\\{",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.object.begin.hql" }
      },
      "end": "\\}",
      "endCaptures": {
        "0": { "name": "punctuation.definition.object.end.hql" }
      },
      "name": "meta.object.hql",
      "patterns": [
        { "include": "$self" }
      ]
    },
    "set-literal": {
      "begin": "#\\[",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.set.begin.hql" }
      },
      "end": "\\]",
      "endCaptures": {
        "0": { "name": "punctuation.definition.set.end.hql" }
      },
      "name": "meta.set.hql",
      "patterns": [
        { "include": "$self" }
      ]
    },
    "enum-declaration": {
      "begin": "\\((enum)\\s+([A-Z][a-zA-Z0-9_]*)",
      "beginCaptures": {
        "1": { "name": "keyword.control.hql" },
        "2": { "name": "entity.name.type.enum.hql" }
      },
      "end": "\\)",
      "patterns": [
        {
          "begin": "\\((case)\\s+([a-zA-Z][a-zA-Z0-9_]*)",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" },
            "2": { "name": "entity.name.type.enum.case.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        },
        { "include": "$self" }
      ]
    },
    "class-declaration": {
      "begin": "\\((class)\\s+([A-Z][a-zA-Z0-9_]*)",
      "beginCaptures": {
        "1": { "name": "keyword.control.hql" },
        "2": { "name": "entity.name.type.class.hql" }
      },
      "end": "\\)",
      "patterns": [
        {
          "begin": "\\((var|let)\\s+([a-zA-Z][a-zA-Z0-9_]*)",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" },
            "2": { "name": "variable.other.member.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        },
        {
          "begin": "\\((constructor)\\s*\\(",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        },
        {
          "begin": "\\((fn|fx)\\s+([a-zA-Z\\-_][a-zA-Z0-9\\-_\\?!]*)",
          "beginCaptures": {
            "1": { "name": "keyword.control.hql" },
            "2": { "name": "entity.name.function.method.hql" }
          },
          "end": "\\)",
          "patterns": [
            { "include": "$self" }
          ]
        },
        { "include": "$self" }
      ]
    },
    "import-declaration": {
      "begin": "\\((import)\\s+",
      "beginCaptures": {
        "1": { "name": "keyword.control.hql" }
      },
      "end": "\\)",
      "patterns": [
        {
          "match": "\\b(from)\\b",
          "name": "keyword.control.hql"
        },
        {
          "begin": "\\[",
          "end": "\\]",
          "name": "meta.brackets.hql",
          "patterns": [
            {
              "match": "([a-zA-Z][a-zA-Z0-9\\-_]*)\\s+as\\s+([a-zA-Z][a-zA-Z0-9\\-_]*)",
              "captures": {
                "1": { "name": "variable.other.hql" },
                "2": { "name": "variable.other.hql" }
              }
            },
            {
              "match": "([a-zA-Z][a-zA-Z0-9\\-_]*)",
              "name": "variable.other.hql"
            },
            { "include": "$self" }
          ]
        },
        { "include": "$self" }
      ]
    },
    "export-declaration": {
      "begin": "\\((export)\\s+",
      "beginCaptures": {
        "1": { "name": "keyword.control.hql" }
      },
      "end": "\\)",
      "patterns": [
        {
          "begin": "\\[",
          "end": "\\]",
          "name": "meta.brackets.hql",
          "patterns": [
            {
              "match": "([a-zA-Z][a-zA-Z0-9\\-_]*)\\s+as\\s+([a-zA-Z][a-zA-Z0-9\\-_]*)",
              "captures": {
                "1": { "name": "variable.other.hql" },
                "2": { "name": "variable.other.hql" }
              }
            },
            {
              "match": "([a-zA-Z][a-zA-Z0-9\\-_]*)",
              "name": "variable.other.hql"
            },
            { "include": "$self" }
          ]
        },
        { "include": "$self" }
      ]
    },
    "dot-notation": {
      "match": "\\.([a-zA-Z][a-zA-Z0-9\\-_]*)",
      "captures": {
        "1": { "name": "variable.other.member.hql" }
      }
    },
    "types": {
      "match": "\\b(Any|Int|Double|String|Bool|Array|Object|Map|Set|Function|Number|Boolean|Symbol|RegExp|Date|Error|Promise|Void|Never|Unknown|Tuple|Record|Union|Intersection|Optional|Required|Readonly|Partial|Pick|Omit|Extract|Exclude|Parameters|ReturnType|InstanceType|ThisType|OmitThisParameter|ThisParameterType|ConstructorParameters|SnakeToCamel|CamelToSnake|[A-Z][a-zA-Z0-9_]*)\\b",
      "name": "support.type.hql"
    },
    "regular-symbol": {
      "match": "\\b([a-zA-Z\\-_][a-zA-Z0-9\\-_\\?!]*)\\b",
      "name": "variable.other.hql"
    },
    "parens": {
      "patterns": [
        {
          "begin": "\\(",
          "beginCaptures": {
            "0": { "name": "punctuation.section.parens.begin.hql" }
          },
          "end": "\\)",
          "endCaptures": {
            "0": { "name": "punctuation.section.parens.end.hql" }
          },
          "name": "meta.parens.hql",
          "patterns": [
            { "include": "$self" }
          ]
        }
      ]
    }
  }
}